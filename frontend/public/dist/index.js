(()=>{"use strict";var t={645:t=>{function r(t){if(this.size=0|t,this.size<=1||0!=(this.size&this.size-1))throw new Error("FFT size must be a power of two and bigger than 1");this._csize=t<<1;for(var r=new Array(2*this.size),e=0;e<r.length;e+=2){const t=Math.PI*e/this.size;r[e]=Math.cos(t),r[e+1]=-Math.sin(t)}this.table=r;for(var o=0,n=1;this.size>n;n<<=1)o++;this._width=o%2==0?o-1:o,this._bitrev=new Array(1<<this._width);for(var i=0;i<this._bitrev.length;i++){this._bitrev[i]=0;for(var s=0;s<this._width;s+=2){var a=this._width-s-2;this._bitrev[i]|=(i>>>s&3)<<a}}this._out=null,this._data=null,this._inv=0}t.exports=r,r.prototype.fromComplexArray=function(t,r){for(var e=r||new Array(t.length>>>1),o=0;o<t.length;o+=2)e[o>>>1]=t[o];return e},r.prototype.createComplexArray=function(){const t=new Array(this._csize);for(var r=0;r<t.length;r++)t[r]=0;return t},r.prototype.toComplexArray=function(t,r){for(var e=r||this.createComplexArray(),o=0;o<e.length;o+=2)e[o]=t[o>>>1],e[o+1]=0;return e},r.prototype.completeSpectrum=function(t){for(var r=this._csize,e=r>>>1,o=2;o<e;o+=2)t[r-o]=t[o],t[r-o+1]=-t[o+1]},r.prototype.transform=function(t,r){if(t===r)throw new Error("Input and output buffers must be different");this._out=t,this._data=r,this._inv=0,this._transform4(),this._out=null,this._data=null},r.prototype.realTransform=function(t,r){if(t===r)throw new Error("Input and output buffers must be different");this._out=t,this._data=r,this._inv=0,this._realTransform4(),this._out=null,this._data=null},r.prototype.inverseTransform=function(t,r){if(t===r)throw new Error("Input and output buffers must be different");this._out=t,this._data=r,this._inv=1,this._transform4();for(var e=0;e<t.length;e++)t[e]/=this.size;this._out=null,this._data=null},r.prototype._transform4=function(){var t,r,e=this._out,o=this._csize,n=1<<this._width,i=o/n<<1,s=this._bitrev;if(4===i)for(t=0,r=0;t<o;t+=i,r++){const e=s[r];this._singleTransform2(t,e,n)}else for(t=0,r=0;t<o;t+=i,r++){const e=s[r];this._singleTransform4(t,e,n)}var a=this._inv?-1:1,l=this.table;for(n>>=2;n>=2;n>>=2){var f=(i=o/n<<1)>>>2;for(t=0;t<o;t+=i)for(var u=t+f,h=t,c=0;h<u;h+=2,c+=n){const t=h,r=t+f,o=r+f,n=o+f,i=e[t],s=e[t+1],u=e[r],d=e[r+1],p=e[o],_=e[o+1],m=e[n],g=e[n+1],v=i,y=s,b=l[c],S=a*l[c+1],w=u*b-d*S,C=u*S+d*b,A=l[2*c],B=a*l[2*c+1],L=p*A-_*B,M=p*B+_*A,I=l[3*c],R=a*l[3*c+1],T=m*I-g*R,H=m*R+g*I,P=v+L,x=y+M,$=v-L,O=y-M,j=w+T,E=C+H,z=a*(w-T),G=a*(C-H),F=P+j,D=x+E,N=P-j,V=x-E,X=$+G,Y=O-z,k=$-G,W=O+z;e[t]=F,e[t+1]=D,e[r]=X,e[r+1]=Y,e[o]=N,e[o+1]=V,e[n]=k,e[n+1]=W}}},r.prototype._singleTransform2=function(t,r,e){const o=this._out,n=this._data,i=n[r],s=n[r+1],a=n[r+e],l=n[r+e+1],f=i+a,u=s+l,h=i-a,c=s-l;o[t]=f,o[t+1]=u,o[t+2]=h,o[t+3]=c},r.prototype._singleTransform4=function(t,r,e){const o=this._out,n=this._data,i=this._inv?-1:1,s=2*e,a=3*e,l=n[r],f=n[r+1],u=n[r+e],h=n[r+e+1],c=n[r+s],d=n[r+s+1],p=n[r+a],_=n[r+a+1],m=l+c,g=f+d,v=l-c,y=f-d,b=u+p,S=h+_,w=i*(u-p),C=i*(h-_),A=m+b,B=g+S,L=v+C,M=y-w,I=m-b,R=g-S,T=v-C,H=y+w;o[t]=A,o[t+1]=B,o[t+2]=L,o[t+3]=M,o[t+4]=I,o[t+5]=R,o[t+6]=T,o[t+7]=H},r.prototype._realTransform4=function(){var t,r,e=this._out,o=this._csize,n=1<<this._width,i=o/n<<1,s=this._bitrev;if(4===i)for(t=0,r=0;t<o;t+=i,r++){const e=s[r];this._singleRealTransform2(t,e>>>1,n>>>1)}else for(t=0,r=0;t<o;t+=i,r++){const e=s[r];this._singleRealTransform4(t,e>>>1,n>>>1)}var a=this._inv?-1:1,l=this.table;for(n>>=2;n>=2;n>>=2){var f=(i=o/n<<1)>>>1,u=f>>>1,h=u>>>1;for(t=0;t<o;t+=i)for(var c=0,d=0;c<=h;c+=2,d+=n){var p=t+c,_=p+u,m=_+u,g=m+u,v=e[p],y=e[p+1],b=e[_],S=e[_+1],w=e[m],C=e[m+1],A=e[g],B=e[g+1],L=v,M=y,I=l[d],R=a*l[d+1],T=b*I-S*R,H=b*R+S*I,P=l[2*d],x=a*l[2*d+1],$=w*P-C*x,O=w*x+C*P,j=l[3*d],E=a*l[3*d+1],z=A*j-B*E,G=A*E+B*j,F=L+$,D=M+O,N=L-$,V=M-O,X=T+z,Y=H+G,k=a*(T-z),W=a*(H-G),U=F+X,q=D+Y,J=N+W,K=V-k;if(e[p]=U,e[p+1]=q,e[_]=J,e[_+1]=K,0!==c){if(c!==h){var Q=N+-a*W,Z=-a*k-V,tt=F+-a*X,rt=-D- -a*Y,et=t+u-c,ot=t+f-c;e[et]=Q,e[et+1]=Z,e[ot]=tt,e[ot+1]=rt}}else{var nt=F-X,it=D-Y;e[m]=nt,e[m+1]=it}}}},r.prototype._singleRealTransform2=function(t,r,e){const o=this._out,n=this._data,i=n[r],s=n[r+e],a=i+s,l=i-s;o[t]=a,o[t+1]=0,o[t+2]=l,o[t+3]=0},r.prototype._singleRealTransform4=function(t,r,e){const o=this._out,n=this._data,i=this._inv?-1:1,s=2*e,a=3*e,l=n[r],f=n[r+e],u=n[r+s],h=n[r+a],c=l+u,d=l-u,p=f+h,_=i*(f-h),m=c+p,g=d,v=-_,y=c-p,b=d,S=_;o[t]=m,o[t+1]=0,o[t+2]=g,o[t+3]=v,o[t+4]=y,o[t+5]=0,o[t+6]=b,o[t+7]=S}},738:function(t,r,e){var o=this&&this.__createBinding||(Object.create?function(t,r,e,o){void 0===o&&(o=e);var n=Object.getOwnPropertyDescriptor(r,e);n&&!("get"in n?!r.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,o,n)}:function(t,r,e,o){void 0===o&&(o=e),t[o]=r[e]}),n=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)"default"!==e&&Object.prototype.hasOwnProperty.call(t,e)&&o(r,t,e);return n(r,t),r};Object.defineProperty(r,"__esModule",{value:!0}),r.animationLoop=r.getRandomInt=r.CANVAS_HEIGHT=r.CANVAS_WIDTH=void 0;const s=i(e(464)),a=i(e(661)),l=i(e(143)),f=i(e(231)),u=document.getElementById("myCanvas");u.width=800,u.height=800,r.CANVAS_WIDTH=u.width,r.CANVAS_HEIGHT=u.height,r.getRandomInt=function(t,r){return Math.floor(Math.random()*(r-t+1))+t},r.animationLoop=function(){const t=u.getContext("2d");let e,o,n=!1;let i,h=[];document.addEventListener("keydown",(function(t){"ArrowUp"===t.code&&(n=!0)})),function(){u.style.backgroundColor=s.randomColor(65,75,40,60,!0),o=s.convertRGBtoHSL(u.style.backgroundColor),e=s.randomColor(65,75,40,60,!0);let t=1.5,r=15;for(let e=0;e<6;e++)r+=.5*t,t=r,i=new a.Circle(r,l.getRandomX(r),l.getRandomY(r),l.getRandomX(r),l.getRandomY(r),s.randomColor(a.minS,a.maxS,a.minL,a.maxL,!0),s.randomColor(a.minS,a.maxS,a.minL,a.maxL,!0),0,2*Math.PI,!1),h.push(i)}();let c=0;setInterval((function(){n||(c++,c%60==0&&function(){e=s.randomColor(65,75,40,60,!0);const t=Math.floor(Math.random()*h.length);i=h[t],f.playing?console.log(f.pitch+"Hz"):i.targetColor=s.randomColor(a.minS,a.maxS,a.minL,a.maxL,!0),i.targetX=l.getRandomX(i.r),i.targetY=l.getRandomY(i.r),h[t]=i}(),c%5==0&&(t.clearRect(0,0,r.CANVAS_WIDTH,r.CANVAS_HEIGHT),u.style.backgroundColor=s.lerpColor(o,e,.02),o=s.convertRGBtoHSL(u.style.backgroundColor),h.sort(((t,r)=>r.r-t.r)),h.forEach((function(r){if(r.lerpPosition(!0),r.lerpPosition(!1),"h"===r.color[0]&&"h"===r.targetColor[0])r.lerpColor();else{if("r"!==r.color[0]||"r"!==r.targetColor[0])throw console.log(r.color[0]),new Error("Browser Not Compatible");r.convColor(!1,!0),r.convColor(!0,!0),r.lerpColor(),r.convColor(!0,!1)}t.beginPath(),t.fillStyle=s.convertHSLtoHSLA(r.color,.7),t.arc(r.x,r.y,r.r,r.startAngle,r.endAngle,r.counterclockwise),t.fill()}))))}),1e3/90)}},231:(t,r,e)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.playing=r.clarity=r.pitch=void 0;const o=e(543),n=document.getElementById("fileupload"),i=document.getElementById("uploadButton");let s,a,l;r.pitch=s,r.clarity=a,r.playing=l,n.addEventListener("input",(function(){i.classList.add("playing"),n.disabled=!0,i.style.cursor="url('../public/assets/img/notallowed.cur'), auto";const t=n.files[0],e=new Audio(URL.createObjectURL(t)),f=new window.AudioContext,u=f.createAnalyser();f.createMediaElementSource(e).connect(u),u.connect(f.destination),e.load(),e.play(),r.playing=l=!0;const h=o.PitchDetector.forFloat32Array(u.fftSize);!function t(o,f,u,h){var c;if(o.getFloatTimeDomainData(u),c=f.findPitch(u,h),r.pitch=s=c[0],r.clarity=a=c[1],r.pitch=s=Math.round(10*s)/10,r.clarity=a=Math.round(100*a),e.ended)return r.playing=l=!1,n.disabled=!1,i.style.cursor="url('../public/assets/img/select.cur'), auto",i.classList.remove("playing"),void(n.value="");window.setTimeout((()=>t(o,f,u,h)),1e3/60)}(u,h,new Float32Array(h.inputLength),f.sampleRate)}))},661:function(t,r,e){var o=this&&this.__createBinding||(Object.create?function(t,r,e,o){void 0===o&&(o=e);var n=Object.getOwnPropertyDescriptor(r,e);n&&!("get"in n?!r.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,o,n)}:function(t,r,e,o){void 0===o&&(o=e),t[o]=r[e]}),n=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)"default"!==e&&Object.prototype.hasOwnProperty.call(t,e)&&o(r,t,e);return n(r,t),r};Object.defineProperty(r,"__esModule",{value:!0}),r.maxL=r.minL=r.maxS=r.minS=r.Circle=void 0;const s=i(e(464)),a=e(143);r.Circle=class{constructor(t,r,e,o,n,i,s,a,l,f){this.r=t,this.x=r,this.y=e,this.targetX=o,this.targetY=n,this.color=i,this.targetColor=s,this.startAngle=a,this.endAngle=l,this.counterclockwise=f}convColor(t,r){const e=t?this.targetColor:this.color,o=r?s.convertRGBtoHSL(e):s.convertHSLStrToRGBStr(e);t?this.targetColor=o:this.color=o}lerpColor(){this.color=s.lerpColor(this.color,this.targetColor,.05)}lerpPosition(t){const r=t?this.x:this.y,e=t?this.targetX:this.targetY,o=(0,a.lerpPosition)(r,e,.01);t?this.x=o:this.y=o}},r.minS=95,r.maxS=100,r.minL=50,r.maxL=70},464:(t,r,e)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.lerpColor=r.randomColor=r.convertRGBtoHSL=r.convertHSLtoHSLA=r.convertHSLStrToRGBStr=r.convertHSLtoRGB=void 0;const o=e(738);function n(t,r,e){let o,n,i;if(0===r)o=n=i=e;else{const s=(t,r,e)=>(e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+6*(r-t)*e:e<.5?r:e<2/3?t+(r-t)*(2/3-e)*6:t),a=e<.5?e*(1+r):e+r-e*r,l=2*e-a;o=s(l,a,t+1/3),n=s(l,a,t),i=s(l,a,t-1/3)}return[Math.round(255*o),Math.round(255*n),Math.round(255*i)]}r.convertHSLtoRGB=n,r.convertHSLStrToRGBStr=function(t){const r=t.match(/^hsl\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%\)$/i);if(!r)throw console.log(t),new Error("Invalid HSL string format");const e=parseInt(r[1],10)/360,o=parseInt(r[2],10)/100,i=parseInt(r[3],10)/100,[s,a,l]=n(e,o,i);return`rgb(${s}, ${a}, ${l})`},r.convertHSLtoHSLA=function(t,r){return t.replace("(","a(").replace(")",`, ${r})`)},r.convertRGBtoHSL=function(t){const r=t.substring(4,t.length-1).split(",").map((t=>parseInt(t.trim()))),e=r[0]/255,o=r[1]/255,n=r[2]/255,i=Math.max(e,o,n),s=Math.min(e,o,n);let a=0;i===s?a=0:i===e?(a=(o-n)/(i-s)%6,a<0&&(a+=6)):i===o?a=(n-e)/(i-s)+2:i===n&&(a=(e-o)/(i-s)+4),a=Math.round(60*a);const l=(i+s)/2;let f=0;return f=i===s?0:l<=.5?(i-s)/(i+s):(i-s)/(2-i-s),f=Math.round(100*f),`hsl(${a}, ${f}%, ${Math.round(100*l)}%)`},r.randomColor=function(t,r,e,i,s){const a=360*Math.random()|0,l=(0,o.getRandomInt)(t,r),f=(0,o.getRandomInt)(e,i);if(s&&"undefined"!=typeof CSS&&CSS.supports("color",`hsl(${a}, ${l}%, ${f}%)`))return`hsl(${a}, ${l}%, ${f}%)`;{const[t,r,e]=n(a/360,l/100,f/100);return`rgb(${t}, ${r}, ${e})`}},r.lerpColor=function(t,r,e){const[o,i,s]=t.substring(4,t.length-1).split(",",3).map((t=>parseInt(t))),[a,l,f]=r.substring(4,r.length-1).split(",",3).map((t=>parseInt(t))),u=o*(1-e)+a*e,h=i*(1-e)+l*e,c=s*(1-e)+f*e;if("undefined"!=typeof CSS&&CSS.supports("color",`hsl(${u}, ${h}%, ${c}%)`))return`hsl(${u}, ${h}%, ${c}%)`;{const[t,r,e]=n(u/360,h/100,c/100);return`rgb(${t}, ${r}, ${e})`}}},143:(t,r,e)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.lerpPosition=r.getRandomY=r.getRandomX=void 0;const o=e(738);r.getRandomX=function(t){let r=Math.random()*(o.CANVAS_WIDTH-t);return r<t&&(r+=t-r),r},r.getRandomY=function(t){let r=Math.random()*(o.CANVAS_HEIGHT-t);return r<t&&(r+=t-r),r},r.lerpPosition=function(t,r,e){return t*(1-e)+r*e}},543:(t,r,e)=>{e.r(r),e.d(r,{Autocorrelator:()=>n,PitchDetector:()=>i});var o=e(645);class n{_inputLength;_fft;_bufferSupplier;_paddedInputBuffer;_transformBuffer;_inverseBuffer;static forFloat32Array(t){return new n(t,(t=>new Float32Array(t)))}static forFloat64Array(t){return new n(t,(t=>new Float64Array(t)))}static forNumberArray(t){return new n(t,(t=>Array(t)))}constructor(t,r){if(t<1)throw new Error("Input length must be at least one");var e;this._inputLength=t,this._fft=new o((e=2*t,e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e)),this._bufferSupplier=r,this._paddedInputBuffer=this._bufferSupplier(this._fft.size),this._transformBuffer=this._bufferSupplier(2*this._fft.size),this._inverseBuffer=this._bufferSupplier(2*this._fft.size)}get inputLength(){return this._inputLength}autocorrelate(t,r=this._bufferSupplier(t.length)){if(t.length!==this._inputLength)throw new Error(`Input must have length ${this._inputLength} but had length ${t.length}`);for(let r=0;r<t.length;r++)this._paddedInputBuffer[r]=t[r];for(let r=t.length;r<this._paddedInputBuffer.length;r++)this._paddedInputBuffer[r]=0;this._fft.realTransform(this._transformBuffer,this._paddedInputBuffer),this._fft.completeSpectrum(this._transformBuffer);const e=this._transformBuffer;for(let t=0;t<e.length;t+=2)e[t]=e[t]*e[t]+e[t+1]*e[t+1],e[t+1]=0;this._fft.inverseTransform(this._inverseBuffer,this._transformBuffer);for(let e=0;e<t.length;e++)r[e]=this._inverseBuffer[2*e];return r}}class i{_autocorrelator;_nsdfBuffer;_clarityThreshold=.9;static forFloat32Array(t){return new i(t,(t=>new Float32Array(t)))}static forFloat64Array(t){return new i(t,(t=>new Float64Array(t)))}static forNumberArray(t){return new i(t,(t=>Array(t)))}constructor(t,r){this._autocorrelator=new n(t,r),this._nsdfBuffer=r(t)}get inputLength(){return this._autocorrelator.inputLength}findPitch(t,r){this._nsdf(t);const e=function(t){const r=[];let e=!1,o=-1/0,n=-1;for(let i=1;i<t.length-1;i++)t[i-1]<=0&&t[i]>0?(e=!0,n=i,o=t[i]):t[i-1]>0&&t[i]<=0?(e=!1,-1!==n&&r.push(n)):e&&t[i]>o&&(o=t[i],n=i);return r}(this._nsdfBuffer);if(0===e.length)return[0,0];const o=Math.max(...e.map((t=>this._nsdfBuffer[t]))),n=e.find((t=>this._nsdfBuffer[t]>=this._clarityThreshold*o)),[i,s]=function(t,r){const[e,o,n]=[t-1,t,t+1],[i,s,a]=[r[e],r[o],r[n]],l=i/2-s+a/2,f=-i/2*(o+n)+s*(e+n)-a/2*(e+o),u=-f/(2*l);return[u,l*u*u+f*u+(i*o*n/2-s*e*n+a*e*o/2)]}(n,this._nsdfBuffer);return[r/i,Math.min(s,1)]}_nsdf(t){this._autocorrelator.autocorrelate(t,this._nsdfBuffer);let r,e=2*this._nsdfBuffer[0];for(r=0;r<this._nsdfBuffer.length&&e>0;r++)this._nsdfBuffer[r]=2*this._nsdfBuffer[r]/e,e-=t[r]**2+t[t.length-r-1]**2;for(;r<this._nsdfBuffer.length;r++)this._nsdfBuffer[r]=0}}}},r={};function e(o){var n=r[o];if(void 0!==n)return n.exports;var i=r[o]={exports:{}};return t[o].call(i.exports,i,i.exports,e),i.exports}e.d=(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},e.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{const t=e(738);window.addEventListener("load",t.animationLoop)})()})();