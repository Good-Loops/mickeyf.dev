<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>mickeyf.dev</title>
    <link rel="stylesheet" href="./assets/styles/style.css">
</head>

<body x-data="{ dCirclesPage: false }" x-init="updateScripts(dCirclesPage); $watch('dCirclesPage', value => updateScripts(value))">

    <audio id="music"></audio>

    <!-- Navigation bar -->
    <div id="central">
        <div id="header" style="font-size: 4vh; margin-right: 110vh;">
            <ul id="nav" style="display: flex; list-style: none; padding: 0;">
                <li style="margin-right: 2vh;"><a style="text-decoration: none; color: grey" href="/" @click="dCirclesPage=false">/</a></li>
                <li style="margin-right: 2vh;"><a style="text-decoration: none; color: grey" href="/#/dancing-circles" @click="dCirclesPage=true">Anim</a></li>
                <li style="margin-right: 2vh;"><a style="text-decoration: none; color: grey" href="/#/user/create" @click="dCirclesPage=false">Register</a></li>
                <li style="margin-right: 2vh;"><a style="text-decoration: none; color: grey" href="/#/login" @click="dCirclesPage=false">Log in</a></li>
            </ul>
        </div>

        <!-- Content from Dancing Circles Page -->
        <template x-if="dCirclesPage">
            <h1 id="page-title">Dancing Circles</h1>
        </template>
        <template x-if="dCirclesPage">
            <canvas id="dancing-circles"></canvas>
        </template>
        <template x-if="dCirclesPage">
            <label id="upload-button" for="file-upload">Upload Music</label>
        </template>
        <template x-if="dCirclesPage">
            <input type="file" name="fileupload" id="file-upload" accept="audio/*" />
        </template>

        <!-- Content from pages handled with index.js -->
        <div id="content" x-show="!dCirclesPage"></div>
    </div>
    <!-- Dynamic scripts -->
    <script>
         function updateScripts(dCirclesPage) {
            // Remove existing script if any
            const existingScript = document.getElementById("dynamic-script");
            if (existingScript) {
                existingScript.remove();
            }

            // Create new script element
            let myCoolCode = document.createElement("script");
            myCoolCode.id = "dynamic-script";

            if (dCirclesPage) {
                myCoolCode.setAttribute("src", "dist/circleAnim.js");
            } else {
                myCoolCode.setAttribute("src", "dist/index.js");
            }

            // Append the new script to the body
            document.body.appendChild(myCoolCode);
        }
        updateScripts();
    </script>
</body>

</html>

</html>